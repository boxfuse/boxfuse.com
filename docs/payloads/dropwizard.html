---
layout: docs
menu: dropwizard
subtitle: 'Dropwizard'
---
<div id="dropwizard">
    <p><img src="/assets/img/dropwizard.png"></p>

    <p>Boxfuse supports <strong>Dropwizard 0.8.x or newer</strong> Apps packaged as a <strong>Dropwizard Executable Jar</strong> using either <strong>OpenJDK 7.x or 8.x</strong>.</p>

    <h2 id="configuration">Configuration</h2>

    <p>By default Boxfuse looks for a <code>/boxfuse.yml</code> file <em>inside</em> the Dropwizard jar file and runs your app
        with the arguments <code>server boxfuse.yml</code>.</p>

    <p>If you use Maven, this means the <code>boxfuse.yml</code> file should be put into the <code>src/main/resources</code> directory.
        When Maven packages the jar, it will include it in the root of your Dropwizard jar file, where Boxfuse can see it.</p>
    <pre class="filetree"><i class="fa fa-folder-open"></i> my-dropwizard-app
  <i class="fa fa-folder-open"></i> src
    <i class="fa fa-folder-open"></i> main
      <i class="fa fa-folder"></i> java
      <i class="fa fa-folder-open"></i> resources
        <span><i class="fa fa-file-text"></i> boxfuse.yml</span></pre>

    <p>Boxfuse parses <code>boxfuse.yml</code> and <strong>automatically configures the ports and the healthcheck</strong> based on the
    information it contains.</p>

    <p>If no <code>boxfuse.yml</code> is found at the root of the jar file, Boxfuse uses the following defaults:</p>

    <pre class="prettyprint">server:
  applicationConnectors:
    - type: http
      port: 80
  requestLog:
      appenders: []
logging:
  appenders:
    - type: console
      threshold: WARN</pre>

    <p>To make it easy to use a different configuration file, Boxfuse always extracts all .yml files at the root of the jar file
        to the same directory as the executable jar. You can then refer to the different yml config file or pass in a
        different set of arguments by setting <code>jvm.main.args</code> to the list of arguments you need. However,
        keep in mind that this will bypass Boxfuse's auto-configuration mechanism and you will need to ensure that
        your Boxfuse configuration matches what you configured in the yaml file.
    </p>

    <h2>Healthchecks</h2>

    <p>Unless specified otherwise, Boxfuse automatically configures <code>healthcheck.port=admin-http</code> (8081)
        and <code>healthcheck.path=/healthcheck</code> to <strong>match Dropwizard's defaults</strong>.</p>

    <h2>SSL (TLS) / HTTPS</h2>

    <p>To use <strong>HTTPS</strong> simply add the KeyStore containing your SSL certificate at the root of the classpath
        <em>inside</em> the Dropwizard jar file. Boxfuse will automatically extract all <code>.jks</code> and <code>.keystore</code>
        files it finds to the same directory on the file system as your Dropwizard jar file.</p>

    <p>If you use Maven, this means your <code>.jks</code> or <code>.keystore</code> KeyStore file should be put into the <code>src/main/resources</code> directory.
        When Maven packages the jar, it will include it in the root of your Dropwizard jar file, where Boxfuse can see it.</p>

    <pre class="filetree"><i class="fa fa-folder-open"></i> my-dropwizard-app
  <i class="fa fa-folder-open"></i> src
    <i class="fa fa-folder-open"></i> main
      <i class="fa fa-folder"></i> java
      <i class="fa fa-folder-open"></i> resources
        <span><i class="fa fa-file"></i> example.jks</span></pre>

    <p>You can then configure the Dropwizard HTTPS connector to use it. So if for example
        you have a KeyStore named <code>/example.jks</code> inside your Dropwizard jar file,
        the connector configuration should look like this:</p>

    <pre class="prettyprint">server:
  applicationConnectors:
    - type: https
      port: 443
      keyStorePath: example.jks
      keyStorePassword: myS3cr3tPwd</pre>

    <p>Very often for newer certificates you'll find you also need to add <code>enableCRLDP: true</code> to make things work.</p>

    <h2>Root Certificates</h2>

    <p>By default, Boxfuse uses the <strong>same root certificate bundle as the latest version of Firefox</strong>.
        Additionally Boxfuse also includes the <strong>root certificates for Amazon RDS</strong>, so you can connect securely to RDS databases out of the box.</p>
    <p>You can, however, ship your own set of root certificates, by placing them in a KeyStore inside the Jar file as <code>/cacerts</code>.
        If you use Maven, this means your <code>cacerts</code> KeyStore file should be put into the <code>src/main/resources</code> directory.
        Boxfuse will then automatically configure the JRE to use these instead.
    </p>

    <pre class="filetree"><i class="fa fa-folder-open"></i> my-dropwizard-app
  <i class="fa fa-folder-open"></i> src
    <i class="fa fa-folder-open"></i> main
      <i class="fa fa-folder"></i> java
      <i class="fa fa-folder-open"></i> resources
        <span><i class="fa fa-file"></i> cacerts</span></pre>

    <p>If you choose to secure your <code>cacerts</code> TrustStore with a password different than the default <code>changeit</code>,
    you have to add the following to your Dropwizard connector configuration:</p>

    <pre class="prettyprint">trustStorePath: /cacerts/cacerts
trustStorePassword: my0th3rPwd</pre>

    <h2>Java Agents</h2>

    <p>If you wish to launch the JRE with one or more Java Agents, simply place the Java Agent files inside the Jar file under
        <code>/javaagents/</code>. In a Maven project this means you have to put your agent jar and whatever other files it requires under <code>src/main/resources/javaagents</code>:</p>
    <pre class="filetree"><i class="fa fa-folder-open"></i> my-dropwizard-app
  <i class="fa fa-folder-open"></i> src
    <i class="fa fa-folder-open"></i> main
      <i class="fa fa-folder"></i> java
      <i class="fa fa-folder-open"></i> resources
        <span><i class="fa fa-folder-open"></i> javaagents
  <i class="fa fa-file"></i> myjavaagent.jar
  <i class="fa fa-file-text"></i> myjavaagent.properties</span></pre>

    <p>Boxfuse will then <strong>automatically configure the JRE to use these Java Agents</strong></p>

    <h2>JVM Memory</h2>

    <p>By default Boxfuse will <strong>dynamically configure your JVM heap to use 85% of the available memory</strong> in the instance. All other settings
        use the JVM defaults. You can override this by specifying the required JVM arguments like <code>-Xmx</code> via the
        <code>jvm.args</code> configuration setting.</p>

    <h2>Sample App</h2>

    <p class="alert alert-info"><strong>Tip:</strong> Check out our 3 part <a href="/blog/dropwizard-aws"><strong>blog post series</strong></a> on how to
        set up a CD pipeline from GitHub to AWS for Dropwizard apps using Boxfuse</p>

    <p>You can find a Dropwizard sample app for Boxfuse on GitHub at <strong><a href="https://github.com/boxfuse/dwunikernel">boxfuse/dwunikernel</a></strong>.</p>

    <p class="next-steps">
        <a class="btn btn-primary" href="/docs/payloads/play">Play <i class="fa fa-arrow-right"></i></a>
    </p>
</div>