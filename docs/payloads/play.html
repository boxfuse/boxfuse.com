---
layout: docs
menu: play
subtitle: 'Play'
---
<div id="play">
    <p><img src="/assets/img/play.png"></p>

    <p>Boxfuse supports <strong>Play 2.3.x or newer</strong> Apps packaged as a <strong>Play dist Zip</strong> using either <strong>OpenJDK 7.x or 8.x</strong>.</p>

    <h2>Get Started</h2>

    <p>If you haven't already, start by following <strong><a href="/getstarted/play">Play &amp; Boxfuse tutorial</a></strong> that will get you <strong>up and running in 5-10 minutes</strong>.</p>

    <h2>Java Runtime Environment</h2>
    <p>By default Boxfuse uses the <strong>latest OpenJDK 8.x version</strong> (headless JRE).</p>

    <h3>OpenJDK version</h3>
    <p>If you want to switch to OpenJDK 7.x or simply an
        older version, you can do so using the <code>-components.openjdk</code> configuration setting:</p>

    <pre class="console"><span>&gt;</span> boxfuse run my-app-1.0.jar <strong>-components.openjdk=</strong>7.80.32</pre>

    <p>To find out which OpenJDK versions are available from the Boxfuse Inventory you can simply issue:</p>

    <pre class="console"><span>&gt;</span> boxfuse inventory openjdk</pre>

    <h3>Custom JRE</h3>
    <p>If you prefer to use a different JRE, including the <strong>Oracle JRE</strong>, rather than the default OpenJDK one,
        you can do so by including the <strong>Linux x64</strong> JRE distribution of your choice in a <code>/jre</code> folder <em>inside</em> the Play dist zip file.

    <p>This <code>/jre</code> folder should be put into the <code>conf</code> directory of your project:</p>

    <pre class="filetree"><i class="fa fa-folder-open"></i> my-play-app
  <i class="fa fa-folder-open"></i> conf
    <span><i class="fa fa-folder-open"></i> jre
  <i class="fa fa-folder-open"></i> bin
    <i class="fa fa-file"></i> java
    <i class="fa fa-file"></i> ...
  <i class="fa fa-folder-open"></i> lib
    <i class="fa fa-folder"></i> amd64
    <i class="fa fa-folder"></i> ...
    <i class="fa fa-file"></i> rt.jar
    <i class="fa fa-file"></i> ...
  <i class="fa fa-file-text"></i> COPYRIGHT
  <i class="fa fa-file-text"></i> LICENSE
  <i class="fa fa-file"></i> ...</span></pre>

    <div class="alert alert-info"><p><strong>Tip for Git users</strong></p>
        <p>To avoid file corruption due to Git line-ending normalization, add the following line to <code>.gitattributes</code></p>
        <pre class="prettyprint" style="margin-bottom: 0">conf/jre/* binary</pre>
    </div>

    <h2 id="configuration">Configuration</h2>

    <p>By default Boxfuse looks for an <code>application.conf</code> file <em>inside</em> the Play dist zip file.
        You can find this file in the <code>/conf</code> directory of your project:</p>

    <pre class="filetree"><i class="fa fa-folder-open"></i> my-play-app
  <i class="fa fa-folder-open"></i> conf
    <span><i class="fa fa-file-text"></i> application.conf</span></pre>

    <p>Boxfuse parses <strong><code>application.conf</code></strong> and <strong>automatically configures the http &amp; https ports, the payload path and the healthcheck path</strong> based on the
        following config parameters: <code>play.server.http.port</code>, <code>play.server.https.port</code> and <code>play.http.context</code>.</p>
        <p>When both <code>play.server.http.port</code> and <code>play.server.https.port</code> are set, the https port takes precedence for the healthcheck.
        You can override this by explicitly passing the Boxfuse parameter <code>-healthcheck.port=http</code> when fusing the image.</p>

    <h2 id="alternative-config">Alternative Play config files</h2>

    <p>By default, Play loads the <code>application.conf</code> file in the <code>conf</code> directory of your app.</p>
        <p>You can however tell play to use alternative config files by passing in a JVM system property. So for:
    </p>

    <pre class="filetree"><i class="fa fa-folder-open"></i> my-play-app
  <i class="fa fa-folder-open"></i> conf
    <i class="fa fa-file-text"></i> application.conf
    <span><i class="fa fa-file-text"></i> other.conf</span></pre>

    <p>You could then launch your Boxfuse instance with <code>-jvm.args=-Dconfig.resource=other.conf</code> to load the
    alternate Play config file called <code>other.conf</code> in the conf directory of your application.</p>

    <p><strong>Note:</strong> these files must be present at the time you invoke <code>activator dist</code>.
        Also keep in mind that <a href="#configuration">Boxfuse auto-configuration</a> only works with the regular <code>application.conf</code> file.</p>

    <h2>Overriding Play configuration</h2>

    <p>As an alternative to overriding the entire configure you can also selectively override individual configuration properties
    on instance launch.</p>

    <h3>Using JVM system properties</h3>
    <p>The first option is to use JVM system properties. For example: <code>-jvm.args=-Dplay.crypto.secret=abcdefghijk</code></p>

    <p>More info in the <a href="https://www.playframework.com/documentation/2.4.x/ProductionConfiguration#Overriding-configuration-with-system-properties">official Play documentation</a>.</p>

    <h3>Using environment variables</h3>
    <p>Play also gives you the opportunity to override configuration properties using environment variables. Say if you have
    defined <code>my.key = ${?MY_KEY_ENV}</code> in your Play configuration file, you can now override it on instance launch
    using <code>-envvars.MY_KEY_ENV=myvalue</code></p>

    <p>More info in the <a href="https://www.playframework.com/documentation/2.4.x/ProductionConfiguration#Using-environment-variables">official Play documentation</a>.</p>

    <h2 id="databases">Databases</h2>

    <h3>Database auto-provisioning</h3>

    <p>When using the <a href="/docs/databases">Boxfuse database auto-provisioning support</a>, Boxfuse automatically configures Play's DataSource
        to use the correct driver class name, jdbc url, user and password.</p>

    <p>If your app includes the PostgreSQL or MySQL JDBC driver, Boxfuse will automatically provision the necessary PostgreSQL or MySQL database
        in each environment and auto-configure Play's DataSource.</p>

    <h3 id="slick">Slick</h3>

    <p>For Play 2.4 and newer apps that include the PostgreSQL or MySQL JDBC driver and use Slick instead of the regular Play database access, Boxfuse also automatically configures
        Slick's driver, the jdbc driver class name, jdbc url, user and password. This can be disabled by setting
        <code>db.type</code> to <code>none</code> when <a href="/docs/commandline/create#dbtype">creating your app</a>.</p>

    <p>You can also override these auto-configured values by explicitly passing them as <a href="/docs/commandline/fuse#jvm.args">JVM arguments</a>. For example, to
        override the Slick driver you can do so like this:</p>

    <pre class="console"><span>&gt;</span> boxfuse fuse my-play-app-1.0.zip <strong>-jvm.args=-Dslick.dbs.default.driver=my.custom.SlickDriver</strong></pre>

    <h3>Using an existing database</h3>
    <p>To disable database auto-provisioning and use an existing database set <code>db.type</code> to <code>none</code> when <a
            href="/docs/commandline/create#dbtype">creating your app</a>.</p>

    <h3 id="evolutions">Evolutions</h3>

    <p>If you choose to use Play Evolutions to migrate your database schema (as opposed to <a href="http://flywaydb.org">Flyway</a>) you have to ensure evolutions
        are applied automatically to prevent application startup issues.</p>
    <p>For Play 2.3.x, set <code>applyEvolutions.&lt;database&gt=true</code> in your Play config (<a href="https://www.playframework.com/documentation/2.3.x/Evolutions#Running-Evolutions-in-Production">reference docs</a>).</p>
    <p>For Play 2.4.x and newer, set <code>play.evolutions.autoApply=true</code> in your Play config (<a href="https://www.playframework.com/documentation/2.4.x/Evolutions#Evolutions-configuration">reference docs</a>).</p>

    <h2 id="tls">SSL (TLS) / HTTPS</h2>

    <p>To use <strong>HTTPS</strong> simply add a keystore containing your SSL certificate inside the zip file at <code>/conf/boxfuse.jks</code>.
        If you use SBT or Typesafe Activator, this means your <code>boxfuse.jks</code> keystore file should be put into the <code>conf</code> directory.</p>
    <p>Both the keystore itself as well as the certificate should be secured with the password <code>boxfuse</code>.</p>

    <pre class="filetree"><i class="fa fa-folder-open"></i> my-play-app
  <i class="fa fa-folder-open"></i> conf
    <span><i class="fa fa-file"></i> boxfuse.jks</span></pre>

    <p>If present, Boxfuse automatically configures your Play application to use it. All you need to do is set the <code>https</code>
        port to the one you want. This can be done either in your Boxfuse or in your Play config. Example:</p>

    <pre class="console"><span>&gt;</span> boxfuse run <strong>-ports.https</strong>=443</pre>

    <p>To use an alternative keystore called say <code>mykeystore.jks</code>, simply place it in the <code>conf</code> directory and refer to it using a relative path like <code>conf/mykeystore.jks</code>.
        You can then also specify its password as usual in your <code>application.conf</code> file.
    </p>

    <h2>Root Certificates</h2>

    <p>By default, Boxfuse uses the <strong>same root certificate bundle as the latest version of Firefox</strong>.
        Additionally Boxfuse also includes the <strong>root certificates for Amazon RDS</strong>, so you can connect securely to RDS databases out of the box.</p>
    <p>You can, however, ship your own set of root certificates, by placing them in a KeyStore inside the Zip file as <code>/conf/cacerts</code>.
        If you use SBT or Typesafe Activator, this means your <code>cacerts</code> KeyStore file should be put into the <code>conf</code> directory.
        Boxfuse will then automatically configure the JRE to use these instead.
    </p>

    <pre class="filetree"><i class="fa fa-folder-open"></i> my-play-app
  <i class="fa fa-folder-open"></i> conf
    <span><i class="fa fa-file"></i> cacerts</span></pre>

    <p>If you choose to secure your <code>cacerts</code> TrustStore with a password different than the default <code>changeit</code>,
        you have to add the following to your Play configuration:</p>

    <pre class="prettyprint">play.ws.ssl {
  trustManager = {
      stores = [
        { path: /cacerts/cacerts, password = "my0th3rPwd" }
      ]
  }
}</pre>

    <h2 id="jce">JCE unlimited strength cryptography</h2>

    <p>To enable JCE unlimited cryptography (for AES-256, RSA-4096, ...), download the policy zip from the Oracle website
        for either <a href="http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html">Java 7</a>
        or <a href="http://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html">Java 8</a>.</p>
    <p>Extract both <code>local_policy.jar</code> and <code>US_export_policy.jar</code> and place them inside the Zip file under <code>/conf</code>.
        If you use SBT, this means both policy jar files should be put into the <code>conf</code> directory.
        Boxfuse will then automatically configure the JRE to use these instead.
    </p>

    <pre class="filetree"><i class="fa fa-folder-open"></i> my-play-app
  <i class="fa fa-folder-open"></i> conf
    <span><i class="fa fa-file"></i> local_policy.jar
<i class="fa fa-file"></i> US_export_policy.jar</span></pre>

    <h2 id="javaagents">Java Agents</h2>

    <p>If you wish to launch the JRE with one or more Java Agents, simply place the Java Agent files inside the Zip file under
        <code>/conf/javaagents/</code>. In a SBT or Typesafe Activator project this means you have to put your agent jar and whatever other files it requires under <code>conf/javaagents</code>:</p>
    <pre class="filetree"><i class="fa fa-folder-open"></i> my-play-app
  <i class="fa fa-folder-open"></i> conf
    <span><i class="fa fa-folder-open"></i> javaagents
  <i class="fa fa-file"></i> myjavaagent.jar
  <i class="fa fa-file-text"></i> myjavaagent.properties</span></pre>

    <p>Boxfuse will then <strong>automatically configure the JRE to use these Java Agents</strong></p>

    <h2>JVM Memory</h2>

    <p>By default Boxfuse will <strong>dynamically configure your JVM heap to use 85% of the available memory</strong> in the instance. All other settings
    use the JVM defaults. You can override this by specifying the required JVM arguments like <code>-Xmx</code> via the
    <code>jvm.args</code> configuration setting.</p>

    <h2>Temporary Files</h2>

    <p>Boxfuse configures the JVM to use <code>/tmp</code> as the directory to store temporary files and provisions <strong>1 GB of space by default</strong>.</p>
    <p>To increase this (up to a maximum of 16 TB), simply set
        the <code>tmp</code> configuration setting to the number of GB of temp space you need. To prevent Boxfuse from
        provisioning any temp space set <code>tmp</code> to <code>0</code>.</p>

    <h2 id="debugging">Debugging</h2>
    <p>Remote debugging (including hot-code replace) with your favorite IDE is fully supported.
        Details and setup instructions on our <a href="/docs/debugging">debugging page</a>.</p>

    <h2 id="profiling">Profiling</h2>
    <p>Profiling with tools like JVisualVM and Java Flight Recorder is fully supported.
        Details and setup instructions on our <a href="/docs/profiling">profiling page</a>.</p>

    <h2 id="live">Live Reloading</h2>
    <p>Boxfuse supports <a href="/docs/live">Live Reloading</a> of exploded Play zip files.</p>

    <h2 id="timezone">Time Zone</h2>

    <p>By default all Boxfuse instance use the <strong><code>UTC</code> time zone</strong>.</p>

    <p>We <strong>don't recommend changing this</strong> as this greatly simplifies time zone issues in machine to machine communication
        and cleanly relegates all time zones related aspects to a pure presentation layer concern.</p>

    <p>If however you still do want to change this, you can override the default time zone of the instance using the
        <code>TZ</code> environment variable. For example to change the time zone of your instance to <code>America/Los_Angeles</code>
        you would do so like this:</p>

    <pre class="console"><span>&gt;</span> boxfuse fuse <strong>-envvars.TZ=</strong>America/Los_Angeles</pre>

    <h2 id="newrelic">New Relic support</h2>

    <p>To monitor your app using <a href="/docs/newrelic">New Relic</a> simply pass in your New Relic license key when
        fusing your image and Boxfuse will automatically install and configure the New Relic Servers Linux x64 and New Relic Java agents for you.</p>

    <pre class="console"><span>&gt;</span> boxfuse fuse <strong>-newrelic.licensekey=</strong>0123456789abcdef0123456789abcdef01234567</pre>

    <p>Alternatively you can also supply a <code>newrelic.yml</code> configuration file for the Java agent and Boxfuse will
        automatically use that instead. Boxfuse will then install the agent for you, but won't override any application name you may have configured.
        If you haven't configured a New Relic license key as described above, Boxfuse will use
        the license key contained in your <code>newrelic.yml</code> configuration file instead.</p>

    <p>In a SBT or Typesafe Activator project, the <code>newrelic.yml</code> file should be put into the <code>conf</code> directory.
        Boxfuse will then automatically configure the New Relic Java agent to use it.</p>

    <pre class="filetree"><i class="fa fa-folder-open"></i> my-play-app
  <i class="fa fa-folder-open"></i> conf
    <span><i class="fa fa-file"></i> newrelic.yml</span></pre>

    <h2 id="sysctl">Linux Kernel Tuning (experts only)</h2>

    <p>If you need to tune the Linux kernel running in your instance, simply place a <code>sysctl.conf</code> file inside the Zip file under
        <code>/conf</code>.
        In a SBT or Typesafe Activator project this means you have to put it under <code>/conf</code>:</p>
    <pre class="filetree"><i class="fa fa-folder-open"></i> my-play-app
  <i class="fa fa-folder-open"></i> conf
    <span><i class="fa fa-file-text"></i> sysctl.conf</span></pre>

    <p>Boxfuse will then <strong>automatically configure the Linux kernel to use these settings</strong>.</p>

    <p class="next-steps">
        <a class="btn btn-primary" href="/docs/payloads/tomcat">Tomcat <i class="fa fa-arrow-right"></i></a>
    </p>
</div>