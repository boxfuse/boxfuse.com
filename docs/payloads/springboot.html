---
layout: docs
menu: springboot
subtitle: 'Spring Boot'
---
<div id="springboot">
    <p><img src="/assets/img/springboot.png"></p>

    <p>Boxfuse supports <strong>Spring Boot 1.2.x or newer</strong> Apps packaged as a <strong>Spring Boot Executable Jar</strong> using either <strong>OpenJDK 7.x or 8.x</strong>.</p>

    <p><strong>Note:</strong> Spring Boot 1.3.x and newer also offers the option to package your app as a "fully executable jar". Do NOT use this as the
    resulting jar file violates the jar specification and will not be readable by Boxfuse and numerous other tools.</p>

    <h2>Get Started</h2>

    <p>If you haven't already, start by following <strong><a href="/getstarted/springboot">Spring Boot &amp; Boxfuse tutorial</a></strong> that will get you <strong>up and running in 5-10 minutes</strong>.</p>

    <p>Also check out our <a href="/blog/spring-boot-ec2"><strong>blog post</strong></a> on how to
        create a Spring Boot application and deploy it on EC2 using Boxfuse.</p>

    <p>For databases, check out our <a href="/blog/databases"><strong>blog post</strong></a> on how to build a Spring Boot microservice that
    uses a Boxfuse-managed PostgreSQL database.</p>

    <h2>OpenJDK version</h2>

    <p>By default Boxfuse uses the <strong>latest OpenJDK 8.x version</strong> (headless JRE). If you want to switch to OpenJDK 7.x or simply an
        older version, you can do so using the <code>-components.openjdk</code> configuration setting:</p>

    <pre class="console"><span>&gt;</span> boxfuse run my-app-1.0.jar <strong>-components.openjdk=</strong>7.80.32</pre>

    <p>To find out which OpenJDK versions are available from the Boxfuse Inventory you can simply issue:</p>

    <pre class="console"><span>&gt;</span> boxfuse inventory openjdk</pre>

    <h2 id="configuration">Configuration</h2>

    <p>By default Boxfuse looks for a <code>/application-boxfuse.properties</code> file <em>inside</em> the Spring Boot jar file
        and <strong>runs your app with the Spring profile <code>boxfuse</code></strong> activated by default.</p>

    <p>If you use Maven or Gradle, this means the <code>application-boxfuse.properties</code> file should be put into the <code>src/main/resources</code> directory.
        When the Spring Boot Maven or Gradle plugin packages the executable jar, it will include it in the root of your class path, where Boxfuse can see it.</p>
    <pre class="filetree"><i class="fa fa-folder-open"></i> my-spring-boot-app
  <i class="fa fa-folder-open"></i> src
    <i class="fa fa-folder-open"></i> main
      <i class="fa fa-folder"></i> java
      <i class="fa fa-folder-open"></i> resources
        <span><i class="fa fa-file-text"></i> application-boxfuse.properties</span></pre>

    <p>Boxfuse parses <strong><code>application-boxfuse.properties</code></strong> and <strong>automatically configures the ports and the healthcheck</strong> based on the
    information it contains.</p>

    <p>If no <code>application-boxfuse.properties</code> is found at the root of the jar file, Boxfuse will automatically
        look for <code>application-default.properties</code> and <code>application.properties</code>. The overriding order
    matches the default Spring Boot one.</p>

    <h2>Ports</h2>

    <p>Boxfuse will automatically configure your application ports to be either <code>HTTP</code>
        or <code>HTTPS</code> based on the value of <code>server.ssl.enabled</code>. The actual port numbers are automatically
        configured according to the values of the <code>server.port</code> and <code>management.port</code> properties.</p>

    <h2>Healthchecks</h2>

    <p>If your application also includes the Spring Boot Actuator, Boxfuse will <strong>automatically configures its healthcheck
        to match the Spring Boot health endpoint</strong>. The only requirement is that if you provide your own configuration,
    you must set <code>management.health.diskspace.enabled</code> to <code>false</code>.</p>

    <h2 id="profiles">Spring Profiles</h2>

    <p>By default Boxfuse activates a Spring Profile called <code>boxfuse</code>. You can however easily specify a different
    profile by setting the <code>SPRING_PROFILES_ACTIVE</code> environment variable to the value you need using the
        <a href="/docs/commandline/run#envvars">envvars</a> argument.</p>

    <p>To use a different Spring Profile for each <a href="/docs/environments">Boxfuse environment</a>,
        set the Spring Boot profile to the value of the <code>BOXFUSE_ENV</code> environment variable which contains the name of the
        current <a href="/docs/environments">environment</a> (dev, test, prod): <code>envvars.SPRING_PROFILES_ACTIVE=$BOXFUSE_ENV</code></p>

    <p class="alert alert-info"><strong>Tip:</strong>
        The <code>BOXFUSE_ENV</code> environment variable is only available within the Boxfuse instance, so when using
        the Boxfuse command-line client with a unix shell you must prevent variable expansion by using single quotes: <code>'-envvars.SPRING_PROFILES_ACTIVE=$BOXFUSE_ENV'</code>
    </p>

    <h2>Databases</h2>

    <p>When using the <a href="/docs/databases">Boxfuse database auto-provisioning support</a>, Boxfuse automatically configures Spring Boot's DataSource
        to use the correct driver class name, jdbc url, user and password.</p>

    <p>If your app includes the PostgreSQL or MySQL JDBC driver, Boxfuse will automatically provision the necessary PostgreSQL or MySQL database
        in each environment and auto-configure Spring Boot's DataSource. This can be disabled by setting
        <code>dbtype</code> to <code>none</code> when <a href="/docs/commandline/create#dbtype">creating your app</a>.</p>

    <h2 id="tls">SSL (TLS) / HTTPS</h2>

    <p>To use <strong>HTTPS</strong> simply add the KeyStore containing your SSL certificate at the root of the classpath
        <em>inside</em> the Spring Boot jar file. Boxfuse will automatically extract all <code>.jks</code> and <code>.keystore</code>
        files it finds to the same directory on the file system as your Spring Boot jar file.</p>

    <p>If you use Maven or Gradle, this means your <code>.jks</code> or <code>.keystore</code> KeyStore file should be put into the <code>src/main/resources</code> directory.
        When Maven or Gradle packages the jar, it will include it in the root of your Spring Boot jar file, where Boxfuse can see it.</p>
    <pre class="filetree"><i class="fa fa-folder-open"></i> my-spring-boot-app
  <i class="fa fa-folder-open"></i> src
    <i class="fa fa-folder-open"></i> main
      <i class="fa fa-folder"></i> java
      <i class="fa fa-folder-open"></i> resources
        <span><i class="fa fa-file"></i> example.jks</span></pre>

    <p>You can then configure the Spring Boot connector to use it. So if for example
        you have a KeyStore named <code>/example.jks</code> inside your Spring Boot jar file,
        <code>application-boxfuse.properties</code> should look like this:</p>

    <pre class="prettyprint">server.port=443
server.ssl.enabled=true
server.ssl.key-store=example.jks
server.ssl.key-store-password=myS3cr3tPwd</pre>

    <h2 id="rootcertificates">Root Certificates</h2>

    <p>By default, Boxfuse uses the <strong>same root certificate bundle as the latest version of Firefox</strong>.
        Additionally Boxfuse also includes the <strong>root certificates for Amazon RDS</strong>, so you can connect securely to RDS databases out of the box.</p>
    <p>You can, however, ship your own set of root certificates, by placing them in a KeyStore inside the Jar file as <code>/cacerts</code>.
        If you use Maven or Gradle, this means your <code>cacerts</code> KeyStore file should be put into the <code>src/main/resources</code> directory.
        Boxfuse will then automatically configure the JRE to use these instead.
    </p>

    <pre class="filetree"><i class="fa fa-folder-open"></i> my-spring-boot-app
  <i class="fa fa-folder-open"></i> src
    <i class="fa fa-folder-open"></i> main
      <i class="fa fa-folder"></i> java
      <i class="fa fa-folder-open"></i> resources
        <span><i class="fa fa-file"></i> cacerts</span></pre>

    <p>If you choose to secure your <code>cacerts</code> TrustStore with a password different than the default <code>changeit</code>,
        you have to add the following to your Spring Boot configuration:</p>

    <pre class="prettyprint">server.ssl.trust-store=/cacerts/cacerts
server.ssl.trust-store-password=my0th3rPwd</pre>

    <h2 id="jce">JCE unlimited strength cryptography</h2>

    <p>To enable JCE unlimited cryptography (for AES-256, RSA-4096, ...), download the policy zip from the Oracle website
        for either <a href="http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html">Java 7</a>
        or <a href="http://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html">Java 8</a>.</p>
    <p>Extract both <code>local_policy.jar</code> and <code>US_export_policy.jar</code> and place them at the root of your Jar file.
        If you use Maven or Gradle, this means both policy jar files should be put into the <code>src/main/resources</code> directory.
        Boxfuse will then automatically configure the JRE to use these instead.
    </p>

    <pre class="filetree"><i class="fa fa-folder-open"></i> my-spring-boot-app
  <i class="fa fa-folder-open"></i> src
    <i class="fa fa-folder-open"></i> main
      <i class="fa fa-folder"></i> java
      <i class="fa fa-folder-open"></i> resources
        <span><i class="fa fa-file"></i> local_policy.jar
<i class="fa fa-file"></i> US_export_policy.jar</span></pre>

    <h2 id="javaagents">Java Agents</h2>

    <p>If you wish to launch the JRE with one or more Java Agents, simply place the Java Agent files inside the Jar file under
        <code>/javaagents/</code>. In a Maven or Gradle project this means you have to put your agent jar and whatever other files it requires under <code>src/main/resources/javaagents</code>:</p>
    <pre class="filetree"><i class="fa fa-folder-open"></i> my-spring-boot-app
  <i class="fa fa-folder-open"></i> src
    <i class="fa fa-folder-open"></i> main
      <i class="fa fa-folder"></i> java
      <i class="fa fa-folder-open"></i> resources
        <span><i class="fa fa-folder-open"></i> javaagents
  <i class="fa fa-file"></i> myjavaagent.jar
  <i class="fa fa-file-text"></i> myjavaagent.properties</span></pre>

    <p>Boxfuse will then <strong>automatically configure the JRE to use these Java Agents</strong></p>

    <h2>JVM Memory</h2>

    <p>By default Boxfuse will <strong>dynamically configure your JVM heap to use 85% of the available memory</strong> in the instance. All other settings
    use the JVM defaults. You can override this by specifying the required JVM arguments like <code>-Xmx</code> via the
    <code>jvm.args</code> configuration setting.</p>

    <h2>Temporary Files</h2>

    <p>Boxfuse configures the JVM to use <code>/tmp</code> as the directory to store temporary files and provisions <strong>1 GB of space by default</strong>.</p>
    <p>To increase this (up to a maximum of 16 TB), simply set
        the <code>tmp</code> configuration setting to the number of GB of temp space you need. To prevent Boxfuse from
        provisioning any temp space set <code>tmp</code> to <code>0</code>.</p>
    <p>Boxfuse also automatically configures the Spring Boot Actuator disk space health check to monitor <code>/tmp</code>. When you disable
    the temp space (by setting <code>tmp</code> to <code>0</code>), Boxfuse will also automatically disable the Actuator disk space health check.</p>

    <p class="next-steps">
        <a class="btn btn-primary" href="/docs/payloads/grails">Grails <i class="fa fa-arrow-right"></i></a>
    </p>
</div>