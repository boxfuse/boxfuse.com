---
layout: maven
pill: run
---
<img src="/assets/img/commands/run.png" alt="run">

<p class="doc-section">boxfuse:run</p>

<p>Runs an <em>Instance</em> of this <em>Image</em> on your machine or on AWS.</p>

<p><strong>Usage: </strong> mvn boxfuse:run -Dboxfuse.image=<em>image</em></p>

<pre class="console">&gt; mvn boxfuse:run -Dboxfuse.image=hello:1.0

Launching Instance of axelfontaine/hello:1.0 on VirtualBox ...
Forwarding http port localhost:8888 -> vb-ec717c5e:80
Instance launched in 00:04.006s -> vb-ec717c5e
Waiting for Payload to start on Instance vb-ec717c5e ...
Payload started in 00:08.786s -> http://127.0.0.1:8888</pre>

<p><br/><strong>Properties:</strong></p>

<table class="table">
    <thead>
    <tr>
        <th>Plugin Parameter</th>
        <th>Maven/System property</th>
        <th>Default</th>
        <th>Description</th>
    </tr>
    </thead>
    <tr>
        <td>user</td>
        <td>boxfuse.user</td>
        <td></td>
        <td><strong>Required</strong> - Your Boxfuse Client user</td>
    </tr>
    <tr>
        <td>secret</td>
        <td>boxfuse.secret</td>
        <td></td>
        <td><strong>Required</strong> - Your Boxfuse Client user</td>
    </tr>
    <tr>
        <td>serverid</td>
        <td>boxfuse.serverid</td>
        <td>boxfuse</td>
        <td>The id of the server in the Maven settings.xml file to
            load the credentials from.<br/><br/>This is an alternative to passing the credentials in
            directly through properties.
        </td>
    </tr>
    <tr>
        <td>cpus</td>
        <td>boxfuse.cpus</td>
        <td><em>same as host</em></td>
        <td>The number of CPUs to assign to an Instance</td>
    </tr>
    <tr>
        <td>env</td>
        <td>boxfuse.env</td>
        <td>dev</td>
        <td>Use the AWS <code>test</code> or <code>prod</code> environments instead of the local <code>dev</code> one</td>
    </tr>
    <tr>
        <td>envvars</td>
        <td>boxfuse.envvars.<em>NAME</em></td>
        <td></td>
        <td>Passes this environment variable into the Instance<br/>
            Example: -env.JDBC_URL=jdbc:mydburl
        </td>
    </tr>
    <tr>
        <td>healtcheck</td>
        <td>boxfuse.healtcheck</td>
        <td>true</td>
        <td>Check whether to payload started correctly</td>
    </tr>
    <tr>
        <td>healthcheck.port</td>
        <td>boxfuse.healtcheck.port</td>
        <td><em>autodetected</em></td>
        <td>The port to check whether to payload started correctly</td>
    </tr>
    <tr>
        <td>healthcheck.path</td>
        <td>boxfuse.healtcheck.path</td>
        <td>/</td>
        <td>The path to check whether to payload started correctly</td>
    </tr>
    <tr>
        <td>healthcheck.timeout</td>
        <td>boxfuse.healtcheck.timeout</td>
        <td>60</td>
        <td>The number of seconds to wait for the Payload to come up</td>
    </tr>
    <tr>
        <td>jvm.args</td>
        <td>boxfuse.jvm.args</td>
        <td></td>
        <td>Extra arguments to pass to the JVM</td>
    </tr>
    <tr>
        <td>jvm.main.class</td>
        <td>boxfuse.jvm.main.class</td>
        <td><em>autodetected</em></td>
        <td>Main class to invoke on JVM startup</td>
    </tr>
    <tr>
        <td>jvm.main.args</td>
        <td>boxfuse.jvm.main.args</td>
        <td></td>
        <td>Arguments to pass to the main class</td>
    </tr>
    <tr>
        <td>image</td>
        <td>boxfuse.image</td>
        <td></td>
        <td>The Image to use</td>
    </tr>
    <tr>
        <td>logs</td>
        <td>boxfuse.logs</td>
        <td>true</td>
        <td>Only for Windows &amp; VirtualBox. Logs may slow down the Instance. Set to false to disable.</td>
    </tr>
    <tr>
        <td>logs.auto</td>
        <td>boxfuse.logs.auto</td>
        <td>true</td>
        <td>Whether to automatically display the instance logs on startup</td>
    </tr>
    <tr>
        <td>logs.dir</td>
        <td>boxfuse.logs.dir</td>
        <td>target/boxfuse</td>
        <td>The directory where the logs should be redirected to</td>
    </tr>
    <tr>
        <td>ports</td>
        <td>boxfuse.ports.<em>NAME</em></td>
        <td>http=80</td>
        <td>Maps the port of the app with this name onto this number.<br/>
            Example: boxfuse.ports.jmx=8001
        </td>
    </tr>
    <tr>
        <td>portsmap</td>
        <td>boxfuse.portsmap.<em>NAME</em></td>
        <td>http=8888</td>
        <td>The local ports to forward to the running Instance.<br/>
            Example: -portsmap.jmx=8111<br/>(if ports.jmx=8001 this will forward localhost:8111 to instance:8001)
        </td>
    </tr>
    <tr>
        <td>ram</td>
        <td>boxfuse.ram</td>
        <td>1024</td>
        <td>The amount of RAM in MB to assign to an Instance</td>
    </tr>
</table>

<p><strong>Sample Configuration</strong></p>

<pre class="prettyprint">&lt;configuration&gt;
    &lt;user&gt;1234567890abcdef1234567890abcdef12345678&lt;/user&gt;
    &lt;secret&gt;ABCDEFGHIJKL1234567abcdefghijklmnopqrstu&lt;/secret&gt;
    &lt;cpus&gt;2&lt;/cpus&gt;
    &lt;env&gt;prod&lt;/env&gt;
    &lt;envvars&gt;
        &lt;JDBC_URL&gt;jdbc:mydburl&lt;/JDBC_URL&gt;
        &lt;MY_OTHER_VAR&gt;abc&lt;/MY_OTHER_VAR&gt;
    &lt;/envvars&gt;
    &lt;healthcheck&gt;true&lt;/healthcheck&gt;
    &lt;healthcheck.port&gt;https&lt;/healthcheck.port&gt;
    &lt;healthcheck.path&gt;/health&lt;/healthcheck.path&gt;
    &lt;healthcheck.timeout&gt;120&lt;/healthcheck.timeout&gt;
    &lt;jvm.args&gt;-DmycustomProp=abc&lt;/jvm.args&gt;
    &lt;jvm.main.class&gt;com.mycorp.MyApp&lt;/jvm.main.class&gt;
    &lt;jvm.main.args&gt;-abc -def&lt;/jvm.main.args&gt;
    &lt;image&gt;hello:1.0&lt;/image&gt;
    &lt;logs&gt;true&lt;/logs&gt;
    &lt;logs.auto&gt;true&lt;/logs.auto&gt;
    &lt;logs.dir&gt;${project.outputDirectory}/logs&lt;/logs.dir&gt;
    &lt;ports&gt;
        &lt;https&gt;443&lt;/https&gt;
        &lt;http&gt;80&lt;/http&gt;
    &lt;/ports&gt;
    &lt;portsmap&gt;
        &lt;https&gt;8443&lt;/https&gt;
        &lt;http&gt;8080&lt;/http&gt;
    &lt;/portsmap&gt;
    &lt;ram&gt;512&lt;/ram&gt;
&lt;/configuration&gt;</pre>

<p><strong>Dynamically defined properties</strong></p>

<p>After you execute run, Boxfuse will automatically define the following Maven properties</p>

<table class="table">
    <thead>
    <tr>
        <th>Maven property</th>
        <th>Description</th>
    </tr>
    </thead>
    <tr>
        <td>boxfuse.image</td>
        <td>The image that was used to launch the instances</td>
    </tr>
    <tr>
        <td>boxfuse.instances</td>
        <td>Comma-separated list of ids of the instances just launched</td>
    </tr>
    <tr>
        <td>boxfuse.instances.0.id</td>
        <td>Id of the instance just launched</td>
    </tr>
    <tr>
        <td>boxfuse.instances.0.url</td>
        <td>Url of the instance just launched. Very useful for automated testing.</td>
    </tr>
</table>
<p class="next-steps">
    <a class="btn btn-primary" href="/docs/maven/ps.html">ps <i class="fa fa-arrow-right"></i></a>
</p>